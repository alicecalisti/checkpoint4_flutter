import 'dart:convert';

class Result {
  int page;
  List<Movie> movies;
  int totalPages;
  int totalResults;
  
  Result({
    required this.page,
    required this.movies,
    required this.totalPages,
    required this.totalResults,
  });

  factory Result.fromRawJson(String str) => Result.fromJson(json.decode(str));

  factory Result.fromJson(Map<String, dynamic> json) => Result(
        page: json["page"],
        movies: List<Movie>.from(json["results"].map((x) => Movie.fromJson(x))),
        totalPages: json["total_pages"],
        totalResults: json["total_results"]
      );
}

class ResultDetail {
  final List<Details> details;

  ResultDetail({required this.details});

  factory ResultDetail.fromJson(Map<String, dynamic> json) {
    return ResultDetail(
      details: json['details'] != null
          ? (json['details'] as List).map((y) => Details.fromJson(y)).toList()
          : [],
    );
  }
}

class Movie {
  bool adult;
  String backdropPath;
  List<int> genreIds;
  int id;
  String originalLanguage;
  String originalTitle;
  String overview;
  double popularity;
  String posterPath;
  DateTime? releaseDate;
  String title;
  bool video;
  double voteAverage;
  int voteCount;

  Movie({
    required this.adult,
    required this.backdropPath,
    required this.genreIds,
    required this.id,
    required this.originalLanguage,
    required this.originalTitle,
    required this.overview,
    required this.popularity,
    required this.posterPath,
    required this.releaseDate,
    required this.title,
    required this.video,
    required this.voteAverage,
    required this.voteCount,
  });

  factory Movie.fromRawJson(String str) => Movie.fromJson(json.decode(str));

  factory Movie.fromJson(Map<String, dynamic> json) => Movie(
        adult: json["adult"] ?? false,
        backdropPath: json["backdrop_path"] ?? '',
        genreIds: List<int>.from(json["genre_ids"].map((x) => x)),
        id: json["id"] ?? 0,
        originalLanguage: json["original_language"] ?? '',
        originalTitle: json["original_title"] ?? '',
        overview: json["overview"] ?? '',
        popularity: json["popularity"]?.toDouble() ?? 0,
        posterPath: json["poster_path"] ?? '',
        releaseDate: DateTime.tryParse(json["release_date"]),
        title: json["title"] ?? '',
        video: json["video"] ?? false,
        voteAverage: json["vote_average"]?.toDouble() ?? 0,
        voteCount: json["vote_count"] ?? 0,
      );
}

class Details {
  bool? adult;
  String backdropPath;
  String belongsToCollection;
  int budget;
  List<Genres> genres;
  String homepage;
  int id;
  String imdbId;
  List<String> originCountry;
  String originalLanguage;
  String originalTitle;
  String overview;
  double popularity;
  String posterPath;
  List<ProductionCompanies> productionCompanies;
  List<ProductionCountries> productionCountries;
  String releaseDate;
  int revenue;
  int runtime;
  List<SpokenLanguages> spokenLanguages;
  String status;
  String tagline;
  String title;
  bool video;
  double voteAverage;
  int voteCount;

  Details(
      {required this.adult,
      required this.backdropPath,
      required this.belongsToCollection,
      required this.budget,
      required this.genres,
      required this.homepage,
      required this.id,
      required this.imdbId,
      required this.originCountry,
      required this.originalLanguage,
      required this.originalTitle,
      required this.overview,
      required this.popularity,
      required this.posterPath,
      required this.productionCompanies,
      required this.productionCountries,
      required this.releaseDate,
      required this.revenue,
      required this.runtime,
      required this.spokenLanguages,
      required this.status,
      required this.tagline,
      required this.title,
      required this.video,
      required this.voteAverage,
      required this.voteCount});

  factory Details.fromRawJson(String str) => Details.fromJson(json.decode(str));
 
  factory Details.fromJson(Map<String, dynamic> json) => Details (
    adult: json['adult'] ?? false,
    backdropPath: json['backdrop_path'] ?? '',
    belongsToCollection : json['belongs_to_collection'] ?? '',
    budget: json['budget'] ?? 0 ,
    // genres: List<Genres>.from(json["genre"].map((y)=>y)),
    genres: List<Genres>.from(json["genres"].map((y) => Genres.fromJson(y))),
    homepage: json['homepage'] ?? '',
    id: json['id'] ?? 0,
    imdbId: json['imdb_id'] ?? '',
    originCountry: List<String>.from(json["country"].map((y)=>y)),
    originalLanguage: json['original_language'] ?? '',
    originalTitle: json['original_title']?? '',
    overview: json['overview'] ?? '',
    popularity: json['popularity'] ?? 0,
    posterPath: json['poster_path'] ?? '',
    productionCompanies: List<ProductionCompanies>.from(json["production_companies"].map((y)=> ProductionCompanies.fromJson(y))),
    productionCountries: List<ProductionCountries>.from(json["production_countries"].map((y)=> ProductionCountries.fromJson(y))),
    releaseDate: json['release_date'] ?? '',
    revenue: json['revenue'] ?? 0,
    runtime: json['runtime'] ?? 0 ,
    spokenLanguages: List<SpokenLanguages>.from(json["spoken_lenguages"].map((y)=> SpokenLanguages.fromJson(y))),
    status: json['status'] ?? '',
    tagline: json['tagline'] ?? '',
    title: json['title'] ?? '',
    video: json['video'] ?? false,
    voteAverage: json['vote_average'] ?? 0,
    voteCount: json['vote_count'] ?? 0,
  );
}

class Genres {
  int? id;
  String? name;

  Genres({this.id, this.name});

  Genres.fromJson(Map<String, dynamic> json) {
    id = json['id'];
    name = json['name'];
  }

  Map<String, dynamic> toJson() {
    final Map<String, dynamic> data = new Map<String, dynamic>();
    data['id'] = this.id;
    data['name'] = this.name;
    return data;
  }
}

class ProductionCompanies {
  int? id;
  String? logoPath;
  String? name;
  String? originCountry;

  ProductionCompanies({this.id, this.logoPath, this.name, this.originCountry});

  ProductionCompanies.fromJson(Map<String, dynamic> json) {
    id = json['id'];
    logoPath = json['logo_path'];
    name = json['name'];
    originCountry = json['origin_country'];
  }

  Map<String, dynamic> toJson() {
    final Map<String, dynamic> data = new Map<String, dynamic>();
    data['id'] = this.id;
    data['logo_path'] = this.logoPath;
    data['name'] = this.name;
    data['origin_country'] = this.originCountry;
    return data;
  }
}

class ProductionCountries {
  String? iso31661;
  String? name;

  ProductionCountries({this.iso31661, this.name});

  ProductionCountries.fromJson(Map<String, dynamic> json) {
    iso31661 = json['iso_3166_1'];
    name = json['name'];
  }

  Map<String, dynamic> toJson() {
    final Map<String, dynamic> data = new Map<String, dynamic>();
    data['iso_3166_1'] = this.iso31661;
    data['name'] = this.name;
    return data;
  }
}

class SpokenLanguages {
  String? englishName;
  String? iso6391;
  String? name;

  SpokenLanguages({this.englishName, this.iso6391, this.name});

  SpokenLanguages.fromJson(Map<String, dynamic> json) {
    englishName = json['english_name'];
    iso6391 = json['iso_639_1'];
    name = json['name'];
  }

  Map<String, dynamic> toJson() {
    final Map<String, dynamic> data = new Map<String, dynamic>();
    data['english_name'] = this.englishName;
    data['iso_639_1'] = this.iso6391;
    data['name'] = this.name;
    return data;
  }
}

